{
    "$schema": "http://json-schema.org/draft-07/schema",
    "title": "Talismans",
    "type": "object",
    "properties": {
        "Talismans": {
            "title": "Talisman Map",
            "additionalProperties": false,
            "propertyNames": {
                "$ref": "./enums/talisman-names.schema.json"
            },
            "patternProperties": {
                "^.+$": {
                    "type": "object",
                    "$ref": "talismans.schema.json#/definitions/Talisman"
                }
            }
        }
    },
    "required": ["Talismans"],
    "definitions": {
        "Talisman": {
            "title": "Talisman",
            "description": "Schema for Talisman items.",
            "allOf": [{"$ref": "item.schema.json"}],
            "properties": {
                "name": {
                    "#comment": "Override list of possible names to be Talisman names only.",
                    "$ref": "./enums/talisman-names.schema.json"
                },
                "weight": {
                    "description": "Weight of the talisman.",
                    "type": "number",
                    "minimum": 0.0
                },
                "effects": {
                    "description": "Effects of the talisman.",
                    "type": "array",
                    "minItems": 1,
                    "items": { "$ref": "talismans.schema.json#/definitions/Effect" }
                },
                "conflicts": {
                    "description": "Array of other talismans this one conflicts with.",
                    "type": "array",
                    "items": { "$ref": "./enums/talisman-names.schema.json" }
                }
            },
            "required": [
                "weight",
                "effects",
                "conflicts"
            ]
        },
        "Effect": {
            "type": "object",
            "properties": {
                "attribute": {
                    "description": "Specific attribute this effect alters.",
                    "$ref": "./enums/attribute-names.schema.json"
                },
                "conditions": {
                    "description": "List of conditions which trigger the effect, none for passive effects.",
                    "type": "array",
                    "minLength": 1,
                    "items": {
                        "oneOf": [
                            { "$ref": "./enums/attack-types.schema.json" },
                            { "$ref": "./enums/effect-types.schema.json" },
                            { "$ref": "./enums/health-conditions.schema.json" },
                            { "$ref": "./enums/attack-conditions.schema.json" }
                        ]
                    }
                },
                "tick_interval": {
                    "description": "Interval in seconds on how often the effect ticks.",
                    "type": "number"
                },
                "model": {
                    "description": "Specifies whether the value is multiplicative (ex. rune acquisition) or additive (ex. +5 strength).",
                    "type": "string",
                    "enum": ["multiplicative", "additive"],
                    "default": "multiplicative"
                },
                "type": {
                    "description": "The kind of the effect, for easy categorization. Either 'positive', 'neutral' or 'negative'.",
                    "type": "string",
                    "default": "positive",
                    "enum": ["positive", "neutral", "negative"]
                },
                "value": {
                    "description": "Value modifying the attribute.",
                    "type": "number"
                },
                "value_pvp": {
                    "description": "Optional modifying value when used in PvP scenario.",
                    "type": "number"
                }
            },
            "required": ["attribute", "model", "type", "value"],
            "additionalProperties": false
        }
    }
}
